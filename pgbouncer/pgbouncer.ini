[databases]
pr_reviewer = host=postgres port=5432 dbname=pr_reviewer

[pgbouncer]
; Connection pooling mode
; - session: client connects to server once, keeps connection
; - transaction: server connection returned after transaction
; - statement: server connection returned after each statement (not recommended)
pool_mode = transaction

; Listen on all interfaces
listen_addr = 0.0.0.0
listen_port = 6432

; Authentication
auth_type = md5
auth_file = /etc/pgbouncer/userlist.txt

; Admin
admin_users = postgres

; Pool settings
default_pool_size = 20
min_pool_size = 5
reserve_pool_size = 5
reserve_pool_timeout = 3

; Maximum client connections
max_client_conn = 1000

; Maximum database connections per pool
max_db_connections = 100

; When server connections is used up, whether to allow new client connections
; 0 - reject immediately
; >0 - wait this many seconds
server_check_delay = 10

; How long to wait before attempting to reconnect to server (seconds)
server_check_query = SELECT 1

; Server is released back to pool after transaction finishes
server_lifetime = 3600

; Server is closed if it's been idle more than this (seconds)
server_idle_timeout = 600

; Query timeout
query_timeout = 0

; Query wait timeout
query_wait_timeout = 120

; Client idle timeout
client_idle_timeout = 0

; Disconnect clients who have been connected longer (hours)
client_login_timeout = 60

; Logging
log_connections = 1
log_disconnections = 1
log_pooler_errors = 1

; Verbose logging (0 = off, 1 = on)
verbose = 0

; Statistics
stats_period = 60

; PID file
pidfile = /var/run/pgbouncer/pgbouncer.pid

; Unix socket
unix_socket_dir = /var/run/pgbouncer
unix_socket_mode = 0777

; TLS settings (опционально)
; client_tls_sslmode = disable
; client_tls_ca_file = /etc/pgbouncer/ca.crt
; client_tls_cert_file = /etc/pgbouncer/server.crt
; client_tls_key_file = /etc/pgbouncer/server.key

; server_tls_sslmode = prefer

